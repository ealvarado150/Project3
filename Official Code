# retrieve log file from URL
from urllib.request import urlretrieve
URL_PATH = 'https://s3.amazonaws.com/tcmg476/http_access_log'
LOCAL_FILE = 'local_copy.log'
local_file, headers = urlretrieve(URL_PATH, LOCAL_FILE)
from datetime import datetime
import re
import urllib.request
fh = str(urllib.request.urlopen(URL_PATH).read())
ERRORS = []

# Total Requests
print("Total Requests")
total_requests = fh.count('local') + fh.count('remote')
print('Total Request:', total_requests)

#Split Entire string & finding 4xx and 3xx instances
four_errors = []
three_errors = []
f = open('local_copy.log', 'rt')
for line in open(LOCAL_FILE):
    text= (line.split(' '))
    if not text or len(text) < 10:
      continue
    connection = text[8]
    printing_connection= connection.count('400')
    if line in printing_connection == 1:
        four_errors += 1
        print(four_errors)
    else:
        continue
     printing_connection= connection.count('300')
     if line in printing_connection == 1:
        three_errors += 1
        print(three_errors)
    else:
        continue   
    
